<!DOCTYPE html>
<html lang="en" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="bootstrap-5.3.0-alpha3-dist/css/bootstrap.rtl.min.css">
    <link rel="stylesheet" href="assets/style/styles.css">
    <title>Document</title>
</head>

<body class="bg-primary">


    <section>
        <div class="container-fluid">
            <div class="row justify-content-between">

                <div class="col-12 col-lg-5 p-3">

                    <div class="w-100 rounded-3 shadow-lg bg-white">

                        <h5 class="text-primary bg-body-tertiary  rounded-top-3 py-3 px-5 ">حساب کاربری</h5>

                        <form class="p-5 py-3 ">

                            <div class="mt-4">
                                <label for="name" class="form-label">نام : </label>
                                <input type="text" id="name" class="form-control" aria-labelledby="nameHelpBlock">
                                <div id="nameHelpBlock" class="form-text  text-danger d-none"
                                    style="font-size: .6rem !important;">
                                    لطفا فقط فارسی بنویسید
                                </div>
                            </div>

                            <div class="mt-4">
                                <label for="family" class="form-label">نام خانوادگی </label>
                                <input type="text" id="family" class="form-control" aria-labelledby="passwordHelpBlock">
                                <div id="passwordHelpBlock" class="form-text text-danger d-none"
                                    style="font-size: .6rem !important;">
                                    لطفا فقط فارسی بنویسید
                                </div>
                            </div>

                            <div class="mt-4">
                                <label for="email" class="form-label"> ایمیل </label>
                                <input type="email" id="email" class="form-control" aria-labelledby="emailHelpBlock">
                                <div id="emailHelpBlock" class="form-text  text-danger d-none"
                                    style="font-size: .6rem !important;">
                                    ایمیل خود را به صورت صحیح وارد کنید
                                </div>
                            </div>

                            <div class="mt-4">
                                <label for="phone" class="form-label">شماره تلفن </label>
                                <input type="text" id="phone" class="form-control" aria-labelledby="phoneHelpBlock">
                                <div id="phoneHelpBlock" class="form-text  text-danger d-none"
                                    style="font-size: .6rem !important;">
                                    ایمیل خود را به صورت صحیح وارد کنید
                                </div>
                            </div>

                            <div class="w-100 mt-5">
                                <button id="sub" class="btn btn-primary w-100 fs-5">عضویت</button>
                            </div>

                        </form>

                    </div>

                </div>

                <div class="col-12 col-lg-6 p-2">
                    <div class="w-100 bg-white rounded-3 p-4 pb-5">
                        <table class="table text-right w-100">
                            <thead>
                                <tr>
                                    <th scope="col" class="text-center">حذف</th>
                                    <th scope="col" class="text-center">ویرایش</th>
                                    <th scope="col" class="text-center">#</th>
                                    <th scope="col" class="text-center">نام</th>
                                    <th scope="col" class="text-center">نام خانوادگی</th>
                                    <th scope="col" class="text-center">ایمیل</th>
                                    <th scope="col" class="text-center">تلفن</th>
                                </tr>
                            </thead>
                            <tbody id="tbody">
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </section>


    <!-- 
    <tr>
        <td class="delete"><i class="fa fa-close" style="cursor: pointer;"></i></td>
        <td class="edit"><i class="fa fa-edit" style="cursor: pointer;"></i></td>
        <td>1</td>
        <td class="name">متین</td>
        <td class="family">متین</td>
        <td class="email">mohammadipegasusm6@gmail.com</td>
        <td class="phone">09183102170</td>
    </tr>

 -->


    <script src="bootstrap-5.3.0-alpha3-dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/jquery-3.7.0.min.js"></script>
    <script src="assets/scripts/app.js"></script>
    <script>
        let s = document.querySelector('#name');
        s.parentNode
        // console.log(s);
        $(document).ready(function () {
            const list = []
            const name = $('#name')[0]
            const family = $('#family')[0]
            const email = $('#email')[0]
            const phone = $('#phone')[0]
            const sub = $('#sub')

            sub.on('click', function (e) {
                e.preventDefault();
                if (checkInputs() && just_persian(name) && just_persian(family)) {
                    const obj={
                        name :name.value,
                        family : family.value,
                        email : email.value,
                        phone : phone.value
                    }
                    $('#tbody').append(generateTableRow(obj))
                }
            });

            function just_persian(element) {
                const p = /^[\u0600-\u06FF\s]+$/;
                if (!p.test(element.value)) {
                    $(element).addClass('border-danger');
                    $(element).parent().find('div').removeClass('d-none')
                    return false;
                }
                $(element).removeClass('border-danger');
                $(element).parent().find('div').addClass('d-none');
                return true;
            }

            function checkInputs() {
                $(name).removeClass('border-danger');
                $(name).parent().find('div').addClass('d-none');

                $(family).removeClass('border-danger');
                $(family).parent().find('div').addClass('d-none');

                $(email).removeClass('border-danger');
                $(email).parent().find('div').addClass('d-none');

                $(phone).removeClass('border-danger');
                $(phone).parent().find('div').addClass('d-none');

                if (name.value === '') {
                    $(name).addClass('border-danger');
                    $(name).parent().find('div').removeClass('d-none')
                }
                if (family.value === '') {
                    $(family).addClass('border-danger');
                    $(family).parent().find('div').removeClass('d-none')
                }
                if (email.value === '') {
                    $(email).addClass('border-danger');
                    $(email).parent().find('div').removeClass('d-none')
                }
                if (phone.value === '') {
                    $(phone).addClass('border-danger');
                    $(phone).parent().find('div').removeClass('d-none')
                }
                if (phone.value === '' || email.value === '' ||
                    family.value === '' || name.value === '') return false;

                return true;
            }

            function generateTableRow(item) {
                list.push(item);
                const tr = document.createElement('tr');
                tr.innerHTML = `
                <td class="delete"><i class="fa fa-close" style="cursor: pointer;">Del</i></td>
                <td class="edit"><i class="fa fa-edit" style="cursor: pointer;">Edit</i></td>
                <td>${list.length}</td>
                <td class="name">${item.name}</td>
                <td class="family">${item.family}</td>
                <td class="email">${item.email}</td>
                <td class="phone">${item.phone}</td>
                `;
                $(tr).find('.delete').on('click', function () {
                    tr.remove();
                });
                $(tr).find('.edit').on('click', function () {
                    $(tr).find('.name').text(prompt('name',item.name));
                    $(tr).find('.family').text(prompt('family',item.family));
                    $(tr).find('.email').text(prompt('email',item.email));
                    $(tr).find('.phone').text(prompt('phone',item.phone));
                });
                console.log(tr);
                return tr;
            }
        });





    </script>
</body>

</html>